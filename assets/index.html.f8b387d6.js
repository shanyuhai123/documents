import{r as c,c as i,a as e,b as t,w as d,F as r,e as a,d as n,o as l}from"./app.63dea666.js";import{_ as p}from"./plugin-vue_export-helper.5a098b48.js";const h={},g=a(`<h1 id="\u5FEB\u901F\u5F00\u542F-nginx" tabindex="-1"><a class="header-anchor" href="#\u5FEB\u901F\u5F00\u542F-nginx" aria-hidden="true">#</a> \u5FEB\u901F\u5F00\u542F Nginx</h1><h2 id="\u4E00\u4E9B\u91CD\u8981\u7684\u4E8B" tabindex="-1"><a class="header-anchor" href="#\u4E00\u4E9B\u91CD\u8981\u7684\u4E8B" aria-hidden="true">#</a> \u4E00\u4E9B\u91CD\u8981\u7684\u4E8B</h2><h3 id="\u9632\u6B62\u6CC4\u6F0F" tabindex="-1"><a class="header-anchor" href="#\u9632\u6B62\u6CC4\u6F0F" aria-hidden="true">#</a> \u9632\u6B62\u6CC4\u6F0F</h3><p>\u8BB0\u5F97\u8BBE\u7F6E <code>default_server</code>\uFF0C\u5426\u5219\u5728\u5220\u9664\u5BF9\u5E94\u7684 <code>conf</code> \u540E\u53EF\u80FD\u5BFC\u81F4\u4E0D\u8BE5\u51FA\u73B0\u7684 <code>server</code> \u66B4\u9732\u51FA\u6765\u3002</p><div class="language-nginx ext-nginx"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">server</span></span> <span class="token punctuation">{</span>
  <span class="token directive"><span class="token keyword">listen</span>    <span class="token number">80</span> default_server</span><span class="token punctuation">;</span> <span class="token comment"># \u5728 listen \u540E\u8FFD\u52A0\uFF0C\u800C\u975E server_name</span>
  <span class="token directive"><span class="token keyword">server_name</span>  xxx.example.com example.com</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="\u7981\u6B62-ip-\u8BBF\u95EE" tabindex="-1"><a class="header-anchor" href="#\u7981\u6B62-ip-\u8BBF\u95EE" aria-hidden="true">#</a> \u7981\u6B62 IP \u8BBF\u95EE</h3><div class="language-nginx ext-nginx"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">server</span></span> <span class="token punctuation">{</span>
  <span class="token directive"><span class="token keyword">listen</span>   <span class="token number">80</span> default_server</span><span class="token punctuation">;</span>
  <span class="token directive"><span class="token keyword">listen</span>   [::]:80 default_server</span><span class="token punctuation">;</span>
  <span class="token directive"><span class="token keyword">server_name</span>  _</span><span class="token punctuation">;</span>
  <span class="token directive"><span class="token keyword">return</span> <span class="token number">444</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="\u5B89\u88C5-nginx" tabindex="-1"><a class="header-anchor" href="#\u5B89\u88C5-nginx" aria-hidden="true">#</a> \u5B89\u88C5 Nginx</h2><p>\u867D\u7136\u73B0\u5728\u5927\u90E8\u5206\u65F6\u5019\u90FD\u4E0A docker \u4E86\uFF0C\u4F46\u5076\u5C14\u81EA\u5DF1\u7F16\u8BD1\u6A21\u5757\u65F6\u624B\u52A8\u5B89\u88C5\u8FD8\u662F\u6BD4\u8F83\u65B9\u4FBF\u7684\u3002</p><h3 id="_1-\u68C0\u6D4B\u6E90" tabindex="-1"><a class="header-anchor" href="#_1-\u68C0\u6D4B\u6E90" aria-hidden="true">#</a> 1. \u68C0\u6D4B\u6E90</h3><p>\u9996\u5148\u9700\u8981\u68C0\u67E5\u5F53\u524D\u6E90\u662F\u5426\u6709 Nginx\uFF08CentOS\u793A\u4F8B\uFF09\uFF0C\u5F53\u6CA1\u6709\u7684\u65F6\u5019\u9700\u8981\u81EA\u5DF1\u6DFB\u52A0\u6E90\u3002</p><div class="language-bash ext-sh"><pre class="language-bash"><code>yum list <span class="token operator">|</span> <span class="token function">grep</span> nginx
<span class="token comment"># nginx.x86_64                             1:1.12.2-2.el7                  epel   </span>
<span class="token comment"># nginx-all-modules.noarch                 1:1.12.2-2.el7                  epel   </span>
<span class="token comment"># nginx-filesystem.noarch                  1:1.12.2-2.el7    </span>
</code></pre></div><h3 id="_2-\u66F4\u65B0-yum-\u6E90\u5E76\u5B89\u88C5" tabindex="-1"><a class="header-anchor" href="#_2-\u66F4\u65B0-yum-\u6E90\u5E76\u5B89\u88C5" aria-hidden="true">#</a> 2. \u66F4\u65B0 yum \u6E90\u5E76\u5B89\u88C5</h3>`,13),m={href:"http://nginx.org/en/download.html",target:"_blank",rel:"noopener noreferrer"},u=n("\u5B98\u7F51"),x=n(" \u4E2D Nginx \u7A33\u5B9A\u7248\u672C\u5DF2\u7ECF\u662F "),_=e("code",null,"1.20.1",-1),k=n(" \uFF0C\u800C\u68C0\u6D4B\u7ED3\u679C\u4F9D\u7136\u662F "),f=e("code",null,"1.12.2",-1),y=n("\uFF0C"),b={href:"http://nginx.org/en/linux_packages.html",target:"_blank",rel:"noopener noreferrer"},v=n("\u4FEE\u6539"),q=n(" yum \u6E90\u6765\u83B7\u53D6\u6700\u65B0\u7248\u3002"),w=n("\u66F4\u65B0 Nginx \u7684\u6E90\u5728 "),N=n("CentOS"),$=n("\u3001"),P=n("Ubuntu"),T=n(" \u4E2D\u7A0D\u6709\u4E0D\u540C\uFF0C\u9700\u8981\u533A\u522B\u5B89\u88C5\u3002"),C=e("h3",{id:"_3-\u7F16\u8BD1\u5B89\u88C5",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#_3-\u7F16\u8BD1\u5B89\u88C5","aria-hidden":"true"},"#"),n(" 3. \u7F16\u8BD1\u5B89\u88C5")],-1),S=e("p",null,[n("\u5F53\u9700\u8981\u6DFB\u52A0\u4E00\u4E9B\u7B2C\u4E09\u65B9\u6A21\u5757\u65F6\u5C31\u53EF\u4EE5\u4F7F\u7528\u8BE5\u5F62\u5F0F\uFF0C\u4EE5\u4E0B\u4E3A "),e("code",null,"CentOS 7.6"),n("\u3002")],-1),j=e("h4",{id:"\u4E0B\u8F7D",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#\u4E0B\u8F7D","aria-hidden":"true"},"#"),n(" \u4E0B\u8F7D")],-1),z=n("\u8FDB\u5165"),I={href:"http://nginx.org/en/download.html",target:"_blank",rel:"noopener noreferrer"},O=n("\u5B98\u7F51"),V=n("\u83B7\u53D6\u5BF9\u5E94\u7684\u7248\u672C\u4E0B\u8F7D\u94FE\u63A5\u3002"),L=a(`<div class="language-bash ext-sh"><pre class="language-bash"><code><span class="token function">wget</span> http://nginx.org/download/nginx-1.20.1.tar.gz

<span class="token function">tar</span> -zxvf nginx-1.20.1.tar.gz <span class="token comment"># \u89E3\u538B</span>
ll nginx-1.20.1 <span class="token comment"># \u9A8C\u8BC1</span>
<span class="token function">cp</span> -r nginx-1.20.1/contrib/vim/* ~/.vim <span class="token comment"># \u62F7\u8D1D vim \u914D\u7F6E</span>
<span class="token function">vim</span> nginx-1.20.1/conf/nginx.conf <span class="token comment"># \u9A8C\u8BC1</span>
</code></pre></div><h4 id="\u914D\u7F6E" tabindex="-1"><a class="header-anchor" href="#\u914D\u7F6E" aria-hidden="true">#</a> \u914D\u7F6E</h4><div class="language-bash ext-sh"><pre class="language-bash"><code>./configure --help <span class="token operator">|</span> <span class="token function">less</span> <span class="token comment"># \u67E5\u770B\u5E2E\u52A9</span>
./configure --prefix<span class="token operator">=</span>/home/shanyuhai/nginx <span class="token comment"># \u6307\u5B9A\u76EE\u5F55</span>

<span class="token comment"># \u53EF\u80FD\u4F1A\u7F3A\u4E4F\u4F9D\u8D56\uFF08\u89E3\u51B3\u65B9\u6848\uFF09</span>
yum <span class="token function">install</span> -y httpd-devel pcre perl pcre-devel zlib zlib-devel GeoIP GeoIP-devel <span class="token comment"># \u91CD\u65B0\u6267\u884C\uFF0C\u5F53\u7136\u4E5F\u53EF\u4EE5\u5148\u4F7F\u7528 yum \u5B89\u88C5\u81EA\u52A8\u83B7\u53D6\u4E00\u904D\u4F9D\u8D56\uFF08\u6682\u4E0D\u6E05\u695A\u662F\u5426\u4F1A\u5BFC\u81F4\u8D1F\u9762\u5F71\u54CD\uFF09</span>

<span class="token comment"># \u7ED3\u679C\u5982\u4E0B</span>
<span class="token comment"># creating objs/Makefile # \u65B0\u589E\u76EE\u5F55</span>

<span class="token comment"># nginx path prefix: &quot;/home/shanyuhai/nginx&quot;</span>
<span class="token comment"># nginx binary file: &quot;/home/shanyuhai/nginx/sbin/nginx&quot;</span>
<span class="token comment"># nginx modules path: &quot;/home/shanyuhai/nginx/modules&quot;</span>
<span class="token comment"># nginx configuration prefix: &quot;/home/shanyuhai/nginx/conf&quot;</span>
<span class="token comment"># nginx configuration file: &quot;/home/shanyuhai/nginx/conf/nginx.conf&quot;</span>
<span class="token comment"># nginx pid file: &quot;/home/shanyuhai/nginx/logs/nginx.pid&quot;</span>
<span class="token comment"># nginx error log file: &quot;/home/shanyuhai/nginx/logs/error.log&quot;</span>
<span class="token comment"># nginx http access log file: &quot;/home/shanyuhai/nginx/logs/access.log&quot;</span>
<span class="token comment"># nginx http client request body temporary files: &quot;client_body_temp&quot;</span>
<span class="token comment"># nginx http proxy temporary files: &quot;proxy_temp&quot;</span>
<span class="token comment"># nginx http fastcgi temporary files: &quot;fastcgi_temp&quot;</span>
<span class="token comment"># nginx http uwsgi temporary files: &quot;uwsgi_temp&quot;</span>
<span class="token comment"># nginx http scgi temporary files: &quot;scgi_temp&quot;</span>

ll objs <span class="token comment"># \u67E5\u770B\u7A0D\u540E make \u7684\u5185\u5BB9</span>
<span class="token function">make</span> <span class="token comment"># \u7F16\u8BD1</span>
ll objs <span class="token comment"># \u9A8C\u8BC1</span>
<span class="token function">make</span> <span class="token function">install</span> <span class="token comment"># \u5B89\u88C5</span>

/home/shanyuhai/nginx/sbin/nginx -V <span class="token comment"># \u9A8C\u8BC1</span>
</code></pre></div><h2 id="\u5FC5\u987B\u77E5\u9053\u7684\u57FA\u672C\u64CD\u4F5C" tabindex="-1"><a class="header-anchor" href="#\u5FC5\u987B\u77E5\u9053\u7684\u57FA\u672C\u64CD\u4F5C" aria-hidden="true">#</a> \u5FC5\u987B\u77E5\u9053\u7684\u57FA\u672C\u64CD\u4F5C</h2><h3 id="\u542F\u7528\u5B89\u5168\u7EC4" tabindex="-1"><a class="header-anchor" href="#\u542F\u7528\u5B89\u5168\u7EC4" aria-hidden="true">#</a> \u542F\u7528\u5B89\u5168\u7EC4</h3><p>\u5728\u4E00\u987F\u64CD\u4F5C\u4E4B\u540E\uFF0C\u660E\u660E\u672C\u5730\u53EF\u4EE5\u8BBF\u95EE\uFF0C\u4E3A\u5565\u5916\u7F51\u8BBF\u95EE\u4E0D\u4E86\uFF1F\u53EF\u80FD\u662F\u4F60\u5FD8\u8BB0\u5F00\u653E\u4E91\u670D\u52A1\u5668\u7684\u5B89\u5168\u7EC4\u4E86\u3002</p><p>\u64CD\u4F5C\u6D41\u7A0B\uFF1A</p><p><code>\u767B\u5F55</code> &gt; <code>\u63A7\u5236\u53F0</code> &gt; <code>\u4E91\u670D\u52A1\u5668ECS\uFF08\u5DE6\u4FA7\uFF09</code> &gt; <code>\u5B89\u5168\u7EC4</code> &gt; <code>\u914D\u7F6E\u89C4\u5219</code> &gt; <code>\u6DFB\u52A0\u5B89\u5168\u7EC4\u89C4\u5219</code> &gt; <code>\u586B\u5145\u5185\u5BB9</code> &gt; <code>\u786E\u5B9A</code></p><h3 id="\u8FDB\u7A0B\u4E0E\u7AEF\u53E3" tabindex="-1"><a class="header-anchor" href="#\u8FDB\u7A0B\u4E0E\u7AEF\u53E3" aria-hidden="true">#</a> \u8FDB\u7A0B\u4E0E\u7AEF\u53E3</h3><div class="language-bash ext-sh"><pre class="language-bash"><code><span class="token comment"># \u8FDB\u7A0B</span>
<span class="token comment"># ps \u662F Process Status \u7684\u7B80\u5199\uFF0C\u53EF\u4EE5\u901A\u8FC7 ps \u6765\u67E5\u770B\u5BF9\u5E94\u7684\u8FDB\u7A0B</span>
<span class="token function">ps</span> -ef <span class="token operator">|</span> <span class="token function">grep</span> nginx
<span class="token comment"># \u7AEF\u53E3</span>
<span class="token comment"># netstat \u662F net status \u7684\u7B80\u5199\uFF0C \u53EF\u4EE5\u67E5\u770B\u6709\u54EA\u4E9B\u7AEF\u53E3\u6B63\u5728\u88AB\u5360\u7528</span>
<span class="token function">netstat</span> -lntup
</code></pre></div><h3 id="\u542F\u52A8" tabindex="-1"><a class="header-anchor" href="#\u542F\u52A8" aria-hidden="true">#</a> \u542F\u52A8</h3><div class="language-bash ext-sh"><pre class="language-bash"><code><span class="token comment"># \u76F4\u63A5\u542F\u52A8</span>
nginx
<span class="token comment"># systemctl \u542F\u52A8</span>
systemctl start nginx.service
<span class="token comment"># \u5F00\u673A\u81EA\u542F</span>
systemctl <span class="token builtin class-name">enable</span> nginx.service
</code></pre></div><h3 id="\u505C\u6B62" tabindex="-1"><a class="header-anchor" href="#\u505C\u6B62" aria-hidden="true">#</a> \u505C\u6B62</h3><div class="language-bash ext-sh"><pre class="language-bash"><code><span class="token comment"># normal quit</span>
nginx -s quit
<span class="token comment"># force stop</span>
nginx -s stop
<span class="token comment"># systemctl</span>
systemctl stop nginx.service

<span class="token comment"># kill pid</span>
<span class="token function">killall</span> nginx
<span class="token comment">## \u6216</span>
<span class="token function">kill</span> -9 pid
</code></pre></div><h3 id="\u91CD\u542F" tabindex="-1"><a class="header-anchor" href="#\u91CD\u542F" aria-hidden="true">#</a> \u91CD\u542F</h3><div class="language-bash ext-sh"><pre class="language-bash"><code><span class="token comment"># normal</span>
nginx -s reload
<span class="token comment"># systemctl</span>
systemctl restart nginx.service
</code></pre></div><h2 id="\u5185\u7F6E\u53D8\u91CF" tabindex="-1"><a class="header-anchor" href="#\u5185\u7F6E\u53D8\u91CF" aria-hidden="true">#</a> \u5185\u7F6E\u53D8\u91CF</h2>`,17),B=n("Nginx \u63D0\u4F9B\u4E86\u4E30\u5BCC\u7684"),H={href:"https://nginx.org/en/docs/varindex.html",target:"_blank",rel:"noopener noreferrer"},E=n("\u5185\u7F6E\u53D8\u91CF"),F=n("\uFF0C\u5982\u679C\u5F15\u5165\u4E86\u5176\u4ED6\u6A21\u5757\u8FD8\u4F1A\u6709\u5BF9\u5E94\u6A21\u5757\u7684\u53D8\u91CF\u3002"),G=a('<table><thead><tr><th style="text-align:center;">variable</th><th style="text-align:center;">module</th><th>description</th></tr></thead><tbody><tr><td style="text-align:center;"><code>$args</code></td><td style="text-align:center;"></td><td>\u8BF7\u6C42\u53C2\u6570</td></tr><tr><td style="text-align:center;"><code>$uri</code></td><td style="text-align:center;"></td><td>\u5F53\u524D\u8BF7\u6C42\u7684 <code>uri</code>\uFF0C\u4E0D\u5E26\u53C2\u6570</td></tr><tr><td style="text-align:center;"><code>$request_uri</code></td><td style="text-align:center;"></td><td>\u8BF7\u6C42\u7684 <code>uri</code>\uFF0C\u5E26\u5B8C\u6574\u53C2\u6570</td></tr><tr><td style="text-align:center;"><code>$host</code></td><td style="text-align:center;"></td><td>\u8BF7\u6C42\u62A5\u6587\u7684 <code>host</code> \u9996\u90E8</td></tr><tr><td style="text-align:center;"><code>$hostname</code></td><td style="text-align:center;"><code>ngx_http_core_module</code></td><td>Nginx \u670D\u52A1\u8FD0\u884C\u5728\u4E3B\u673A\u7684\u4E3B\u673A\u540D</td></tr><tr><td style="text-align:center;"><code>$remote_addr</code></td><td style="text-align:center;"><code>ngx_stream_core_module</code></td><td>\u5BA2\u6237\u7AEF IP</td></tr><tr><td style="text-align:center;"><code>$remote_port</code></td><td style="text-align:center;"><code>ngx_stream_core_module</code></td><td>\u5BA2\u6237\u7AEF\u7AEF\u53E3</td></tr><tr><td style="text-align:center;"><code>$request_filename</code></td><td style="text-align:center;"></td><td>\u7528\u6237\u8BF7\u6C42\u4E2D\u7684 <code>uri</code> \u7ECF\u8FC7\u672C\u5730 <code>root</code> \u6216 <code>alias</code> \u6620\u5C04\u540E\u7684\u672C\u5730\u6587\u4EF6\u8DEF\u5F84\u3002\u53EF\u5C06\u5176\u52A0\u5165 <code>log</code> \u4E2D\u7814\u7A76 <code>root</code> \u548C <code>alias</code></td></tr><tr><td style="text-align:center;"><code>$server_addr</code></td><td style="text-align:center;"><code>ngx_stream_core_module</code></td><td>\u670D\u52A1\u5668 IP</td></tr><tr><td style="text-align:center;"><code>$server_port</code></td><td style="text-align:center;"><code>ngx_stream_core_module</code></td><td>\u670D\u52A1\u6C42\u7AEF\u53E3</td></tr><tr><td style="text-align:center;"><code>$server_protocol</code></td><td style="text-align:center;"></td><td>\u670D\u52A1\u5668\u7684 HTTP \u534F\u8BAE\u7248\u672C\uFF0C\u4F8B <code>HTTP/1.0</code>\u3001<code>HTTP/1.1</code></td></tr><tr><td style="text-align:center;"><code>$scheme</code></td><td style="text-align:center;"></td><td>\u8BF7\u6C42\u4E2D\u7684\u534F\u8BAE\uFF0C\u4F8B <code>http</code>\u3001<code>https</code></td></tr></tbody></table><p>\u6307\u5B9A <code>module</code> \u65F6\u57FA\u672C\u4E0A\u90FD\u6709 <code>ngx_http_core_module</code>\u3002</p><h2 id="\u53C2\u8003\u8D44\u6599" tabindex="-1"><a class="header-anchor" href="#\u53C2\u8003\u8D44\u6599" aria-hidden="true">#</a> \u53C2\u8003\u8D44\u6599</h2>',3),R={href:"http://nginx.org/en/docs/",target:"_blank",rel:"noopener noreferrer"},A=n("Nginx"),D=e("li",null,"\u300A\u7CBE\u901ANginx\u300B\uFF1ADimitri Aivaliotis \u8457",-1);function M(U,J){const s=c("OutboundLink"),o=c("RouterLink");return l(),i(r,null,[g,e("p",null,[e("a",m,[u,t(s)]),x,_,k,f,y,e("a",b,[v,t(s)]),q]),e("p",null,[w,t(o,{to:"/os/centos/install-the-latest-version-of-nginx.html"},{default:d(()=>[N]),_:1}),$,t(o,{to:"/os/ubuntu/install-the-latest-version-of-nginx.html"},{default:d(()=>[P]),_:1}),T]),C,S,j,e("p",null,[z,e("a",I,[O,t(s)]),V]),L,e("p",null,[B,e("a",H,[E,t(s)]),F]),G,e("ol",null,[e("li",null,[e("a",R,[A,t(s)])]),D])],64)}var W=p(h,[["render",M]]);export{W as default};
