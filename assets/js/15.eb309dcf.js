(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{333:function(t,e,a){"use strict";a.r(e);var r=a(24),s=Object(r.a)({},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h2",{attrs:{id:"ä»‹ç»"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ä»‹ç»","aria-hidden":"true"}},[t._v("#")]),t._v(" ä»‹ç»")]),t._v(" "),a("p",[t._v("åœ¨åˆå­¦æ—¶æ³¨é‡Šè¿‡"),a("a",{attrs:{href:"/backend/nginx/explain-the-main-configuration-file-of-nginx"}},[t._v("é…ç½®æ–‡ä»¶")]),t._v("ï¼Œå°±ä»¥ä¸ºæ˜¯è¯¦è§£äº†ï½")]),t._v(" "),a("p",[t._v("å…¶å®æ¯ä¸ªå‚æ•°éƒ½æœ‰æ¯”è¾ƒå¤æ‚çš„ç”¨æ³•ï¼Œè¯¦æƒ…å¯è§ Nginx çš„ "),a("a",{attrs:{href:"https://nginx.org/en/docs/dirindex.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("directives"),a("OutboundLink")],1),t._v("ã€‚")]),t._v(" "),a("h2",{attrs:{id:"listen"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#listen","aria-hidden":"true"}},[t._v("#")]),t._v(" "),a("a",{attrs:{href:"https://nginx.org/en/docs/http/ngx_http_core_module.html#listen",target:"_blank",rel:"noopener noreferrer"}},[t._v("listen"),a("OutboundLink")],1)]),t._v(" "),a("p",[t._v("éœ€è¦ç›‘å¬çš„ç«¯å£ã€‚")]),t._v(" "),a("div",{staticClass:"danger custom-block"},[a("p",[t._v("åœ¨å®˜ç½‘çš„é“¾æ¥ä¸­éœ€è¦æ³¨æ„çš„æ˜¯ï¼š")]),t._v(" "),a("ol",[a("li",[a("p",[t._v("Syntaxï¼ˆè¯­æ³•ï¼‰ï¼Œè¯­æ³•æ²¡å•¥å¥½è¯´çš„ã€‚")])]),t._v(" "),a("li",[a("p",[t._v("Contextï¼ˆä¸Šä¸‹æ–‡ï¼‰ï¼Œä¸Šä¸‹æ–‡å³å¤§æ‹¬å· "),a("code",[t._v("{}")]),t._v(" çš„èŒƒå›´å†…ï¼Œå¦‚ listen ä»…å¯ä»¥å†™åœ¨ server ä¸Šä¸‹æ–‡ä¸­ï¼Œä¸èƒ½å†™åœ¨ http å’Œ location çš„ä¸Šä¸‹æ–‡ä¸­ã€‚")])])])]),t._v(" "),a("h2",{attrs:{id:"server-name"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#server-name","aria-hidden":"true"}},[t._v("#")]),t._v(" "),a("a",{attrs:{href:"https://nginx.org/en/docs/http/ngx_http_core_module.html#server_name",target:"_blank",rel:"noopener noreferrer"}},[t._v("server_name"),a("OutboundLink")],1)]),t._v(" "),a("p",[t._v("æ­¤å¤„ä¸ºæ˜¯ core module çš„ä»‹ç»ï¼Œå…¶ä½™æ¨¡å—ä¸ä¹‹ç›¸å…³çš„ä¹Ÿæœ‰å¾ˆå¤šã€‚")]),t._v(" "),a("p",[t._v("è¿™è¾¹æ¯”è¾ƒé‡è¦çš„æ˜¯ Server çš„åŒ¹é…é¡ºåºï¼š")]),t._v(" "),a("ol",[a("li",[t._v("ç²¾ç¡®åŒ¹é…ï¼›")]),t._v(" "),a("li",[a("code",[t._v("*")]),t._v(" åœ¨å‰çš„æ³›åŸŸåï¼›")]),t._v(" "),a("li",[a("code",[t._v("*")]),t._v(" åœ¨åçš„æ³›åŸŸåï¼›")]),t._v(" "),a("li",[t._v("æŒ‰æ–‡ä»¶ä¸­çš„é¡ºåºåŒ¹é…æ­£åˆ™è¡¨è¾¾å¼åŸŸåï¼›")]),t._v(" "),a("li",[t._v("default server  "),a("Badge",{attrs:{text:"é‡ç‚¹",type:"error"}}),t._v("ã€‚æœªå£°æ˜æ—¶æŒ‡å‘æ–‡ä»¶ç¬¬ä¸€ä¸ª serverã€‚")],1)]),t._v(" "),a("div",{staticClass:"danger custom-block"},[a("p",[t._v("åœ¨ä¹‹å‰æœ‰å¤šä¸ªé¡¹ç›®æ—¶ï¼Œæœ‰éƒ¨åˆ†åº”ç”¨é™åˆ¶ IP è®¿é—®ï¼Œç»“æœæˆ‘åœ¨åˆ é™¤åŸé¡¹ç›®åœ°å€åï¼Œå¿˜è®°å…³é—­ DNS è§£æäº†ï¼Œæ°å¥½é™åˆ¶è®¿é—®çš„åº”ç”¨ server åˆæ’åœ¨ç¬¬ä¸€ä¸ªï¼Œæ—¶éš”å¥½ä¹…è®¿é—®è‡ªå·±çš„åŸŸåæ‰å‘ç°è£¸å¥”å¾ˆä¹…äº† ğŸ˜­ã€‚")])]),t._v(" "),a("h3",{attrs:{id:"_1-ç¤ºä¾‹"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-ç¤ºä¾‹","aria-hidden":"true"}},[t._v("#")]),t._v(" 1. ç¤ºä¾‹")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("server "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\tlisten    "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("80")]),t._v(" default_server"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# åœ¨ listen åè¿½åŠ ï¼Œè€Œé server_name")]),t._v("\n\tserver_name  www.shanyuhai.top shanyuhai.top"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h3",{attrs:{id:"_2-æ³¨æ„"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-æ³¨æ„","aria-hidden":"true"}},[t._v("#")]),t._v(" 2. æ³¨æ„")]),t._v(" "),a("p",[t._v("åœ¨éƒ¨åˆ†æ–‡ç« ä¸­æ³¨æ„åˆ°ï¼Œå¦‚æœä½ æƒ³è¦æé«˜è‡ªå·±çš„ç½‘ç«™çš„çŸ¥ååº¦ï¼Œé‚£ä¹ˆè¿˜éœ€è¦é…åˆ 301 è¿›è¡Œè·³è½¬ï¼Œå¦åˆ™è¯¥é¡¹è®¾ç½®ä¼šå¯¼è‡´æœç´¢å¼•æ“æ”¶å½•ä»–äººçš„ç«™ç‚¹ï¼Œè€Œéä½ çš„ã€‚")]),t._v(" "),a("h2",{attrs:{id:"rewrite"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#rewrite","aria-hidden":"true"}},[t._v("#")]),t._v(" "),a("a",{attrs:{href:"https://nginx.org/en/docs/http/ngx_http_rewrite_module.html#rewrite",target:"_blank",rel:"noopener noreferrer"}},[t._v("rewrite"),a("OutboundLink")],1)]),t._v(" "),a("p",[t._v("è¯¥æŒ‡ä»¤å¯ä»¥ç”¨äºä¿®æ”¹è®¿é—®çš„ URLï¼Œå¯¹åº”çš„è¯­æ³•ä¸ºï¼š")]),t._v(" "),a("div",{staticClass:"danger custom-block"},[a("p",[t._v("rewrite regex replacement [flag]")])]),t._v(" "),a("p",[t._v("flag å…·æœ‰ä»¥ä¸‹å‚æ•°ï¼š")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",{staticStyle:{"text-align":"center"}},[t._v("flag")]),t._v(" "),a("th",[t._v("è¯´æ˜")])])]),t._v(" "),a("tbody",[a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("last")]),t._v(" "),a("td",[t._v("ä½¿ç”¨æ›´æ”¹çš„ URI åŒ¹é…æ–°ä½ç½®ã€‚")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("break")]),t._v(" "),a("td",[t._v("åœæ­¢å¤„ç†å½“å‰çš„æŒ‡ä»¤é›†ã€‚")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("redirect")]),t._v(" "),a("td",[t._v("è¿”å› 302 ï¼ˆä¸´æ—¶ï¼‰é‡å®šå‘ã€‚")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("permanent")]),t._v(" "),a("td",[t._v("è¿”å› 301 ï¼ˆæ°¸ä¹…ï¼‰é‡å®šå‘ã€‚")])])])]),t._v(" "),a("p",[t._v("è¿‘æœŸåœ¨å‡çº§ç«™ç‚¹åˆ° https æ—¶å°±ç”¨åˆ°äº†è¯¥è¯­æ³•ï¼š")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("rewrite ^"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(".*"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" https://"),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$host")]),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$1")]),t._v(" permanent"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# åŠ Certbot è‡ªåŠ¨é…ç½®çš„")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$host")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" blog.shanyuhai.top"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("301")]),t._v(" https://"),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$host")]),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$request_uri")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# managed by Certbot")]),t._v("\n")])])])])},[],!1,null,null,null);e.default=s.exports}}]);