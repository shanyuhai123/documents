import{r as t,c as o,a as n,b as e,F as c,e as a,d as s,o as l}from"./app.3454b514.js";import{_ as k}from"./plugin-vue_export-helper.5a098b48.js";const r={},u=a(`<h1 id="\u63A8\u5BFC-ref-\u7C7B\u578B" tabindex="-1"><a class="header-anchor" href="#\u63A8\u5BFC-ref-\u7C7B\u578B" aria-hidden="true">#</a> \u63A8\u5BFC Ref \u7C7B\u578B</h1><blockquote><p>\u7C7B\u578B\u4F53\u64CD\u4F7F\u6211\u66F4\u52A0\u5F3A\u58EE\u3002</p></blockquote><p>\u4F7F\u7528 <code>ref</code> \u7684\u59FF\u52BF\u4E3A\uFF1A</p><div class="language-typescript ext-ts"><pre class="language-typescript"><code><span class="token keyword">const</span> count <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>count<span class="token punctuation">.</span>value<span class="token punctuation">)</span>
</code></pre></div><p>\u6240\u4EE5\u5148\u6446\u4E2A <code>Ref</code>\uFF1A</p><div class="language-typescript ext-ts"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">Ref<span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token operator">=</span> <span class="token builtin">any</span><span class="token operator">&gt;</span></span> <span class="token punctuation">{</span>
  value<span class="token operator">:</span> <span class="token constant">T</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="\u63A8\u65AD-infer" tabindex="-1"><a class="header-anchor" href="#\u63A8\u65AD-infer" aria-hidden="true">#</a> \u63A8\u65AD infer</h2>`,7),i={href:"https://www.typescriptlang.org/docs/handbook/2/conditional-types.html#inferring-within-conditional-types",target:"_blank",rel:"noopener noreferrer"},d=s("infer"),f=s(" \u53EF\u5728 "),y=n("code",null,"extends",-1),m=s(" \u6761\u4EF6\u8BED\u53E5\u4E2D\u8FDB\u884C\u63A8\u65AD\uFF1A"),w=a(`<div class="language-typescript ext-ts"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name">Flatten<span class="token operator">&lt;</span>Type<span class="token operator">&gt;</span></span> <span class="token operator">=</span> Type <span class="token keyword">extends</span> <span class="token class-name"><span class="token builtin">Array</span><span class="token operator">&lt;</span><span class="token keyword">infer</span> Item<span class="token operator">&gt;</span></span> <span class="token operator">?</span> Item <span class="token operator">:</span> Type
</code></pre></div><h2 id="\u4F7F\u7528\u6CDB\u578B\u6765\u63A8\u5BFC\u7ED3\u679C" tabindex="-1"><a class="header-anchor" href="#\u4F7F\u7528\u6CDB\u578B\u6765\u63A8\u5BFC\u7ED3\u679C" aria-hidden="true">#</a> \u4F7F\u7528\u6CDB\u578B\u6765\u63A8\u5BFC\u7ED3\u679C</h2><p>\u6709 <code>ref</code> \u51FD\u6570\uFF1A</p><div class="language-typescript ext-ts"><pre class="language-typescript"><code><span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">ref</span><span class="token punctuation">(</span>value<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    value
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> count <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">C</span></span> <span class="token operator">=</span> <span class="token keyword">typeof</span> count<span class="token punctuation">.</span>value <span class="token comment">// any</span>
</code></pre></div><p>\u52A0\u4E0A\u6CDB\u578B\u8FDB\u884C\u63A8\u5BFC\uFF1A</p><div class="language-typescript ext-ts"><pre class="language-typescript"><code><span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token generic-function"><span class="token function">ref</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>value<span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">)</span><span class="token operator">:</span> Ref<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    value
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> count <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">C</span></span> <span class="token operator">=</span> <span class="token keyword">typeof</span> count<span class="token punctuation">.</span>value <span class="token comment">// number</span>
<span class="token keyword">const</span> str <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">&#39;1&#39;</span><span class="token punctuation">)</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">S</span></span> <span class="token operator">=</span> <span class="token keyword">typeof</span> str<span class="token punctuation">.</span>value <span class="token comment">// string</span>
</code></pre></div><h2 id="ref-\u503C\u5D4C\u5957" tabindex="-1"><a class="header-anchor" href="#ref-\u503C\u5D4C\u5957" aria-hidden="true">#</a> ref \u503C\u5D4C\u5957</h2><div class="language-typescript ext-ts"><pre class="language-typescript"><code><span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token generic-function"><span class="token function">ref</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>value<span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">)</span><span class="token operator">:</span> Ref<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    value
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> count <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token function">ref</span><span class="token punctuation">(</span><span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">C</span></span> <span class="token operator">=</span> <span class="token keyword">typeof</span> count<span class="token punctuation">.</span>value <span class="token comment">// Ref&lt;Ref&lt;number&gt;&gt;</span>
</code></pre></div><p>\u6240\u4EE5\u53EF\u4EE5\u4F5C\u51FA\u4E00\u4E2A\u5224\u65AD\uFF0C\u5F53\u4F20\u5165\u7684\u7C7B\u578B\u662F Ref \u7C7B\u578B\u65F6\u5C31\u7528\u5176\u5185\u90E8\u7684\u7C7B\u578B\uFF0C\u4E8E\u662F\u5F97\u5230\uFF1A</p><div class="language-typescript ext-ts"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name">UnwrapRef<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token class-name">Ref<span class="token operator">&lt;</span><span class="token keyword">infer</span> <span class="token constant">R</span><span class="token operator">&gt;</span></span> <span class="token operator">?</span> <span class="token constant">R</span> <span class="token operator">:</span> <span class="token constant">T</span>
</code></pre></div><p>\u914D\u5408\u4F7F\u7528\uFF1A</p><div class="language-typescript ext-ts"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name">UnwrapRef<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token class-name">Ref<span class="token operator">&lt;</span><span class="token keyword">infer</span> <span class="token constant">R</span><span class="token operator">&gt;</span></span> <span class="token operator">?</span> <span class="token constant">R</span> <span class="token operator">:</span> <span class="token constant">T</span>

<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token generic-function"><span class="token function">ref</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>value<span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">)</span><span class="token operator">:</span> Ref<span class="token operator">&lt;</span>UnwrapRef<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    value
  <span class="token punctuation">}</span> <span class="token keyword">as</span> <span class="token builtin">any</span>
<span class="token punctuation">}</span>

<span class="token comment">// \u89E3\u8BF4\uFF1A</span>
<span class="token comment">// ref(1) \u4F20\u5165\u7C7B\u578B\u662F number\uFF0C\u6240\u4EE5\u6761\u4EF6\u8BED\u53E5 \`T extends Ref&lt;infer R&gt;\` \u4F1A\u8D70 false\uFF0C\u8FD4\u56DE number</span>
<span class="token comment">// \u4E8E\u662F ref(1) \u7684\u7C7B\u578B\u4E3A Ref&lt;number&gt;</span>
<span class="token comment">// \u518D ref(ref(1))\uFF0C\u4F20\u5165\u7C7B\u578B\u662F Ref&lt;number&gt;\uFF0C\u6240\u4EE5\u6761\u4EF6\u8BED\u53E5 \`T extends Ref&lt;infer R&gt;\` \u4F1A\u8D70 True\uFF0C\u8FD4\u56DE number</span>
<span class="token comment">// \u4E8E\u662F ref(ref(1)) \u7684\u7C7B\u578B\u4F9D\u65E7\u4E3A Ref&lt;number&gt;</span>
<span class="token comment">// \u518D ref(ref(ref(1)))\uFF0C\u4F20\u5165\u7C7B\u578B\u662F Ref&lt;number&gt;\uFF0C\u6240\u4EE5\u6761\u4EF6\u8BED\u53E5 \`T extends Ref&lt;infer R&gt;\` \u4F1A\u8D70 True\uFF0C\u8FD4\u56DE number</span>
<span class="token keyword">const</span> count <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token function">ref</span><span class="token punctuation">(</span><span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">C</span></span> <span class="token operator">=</span> <span class="token keyword">typeof</span> count<span class="token punctuation">.</span>value <span class="token comment">// number</span>
<span class="token keyword">const</span> str <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token function">ref</span><span class="token punctuation">(</span><span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">&#39;1&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">S</span></span> <span class="token operator">=</span> <span class="token keyword">typeof</span> str<span class="token punctuation">.</span>value <span class="token comment">// string</span>
</code></pre></div><h2 id="ref-\u5BF9\u8C61\u5D4C\u5957" tabindex="-1"><a class="header-anchor" href="#ref-\u5BF9\u8C61\u5D4C\u5957" aria-hidden="true">#</a> ref \u5BF9\u8C61\u5D4C\u5957</h2><p>\u4FEE\u6539\u4E0B\u793A\u4F8B\uFF1A</p><div class="language-typescript ext-ts"><pre class="language-typescript"><code><span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  foo<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
  bar<span class="token operator">:</span> <span class="token string">&#39;1&#39;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">OF</span></span> <span class="token operator">=</span> <span class="token keyword">typeof</span> obj<span class="token punctuation">.</span>value<span class="token punctuation">.</span>foo <span class="token comment">// number</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">OB</span></span> <span class="token operator">=</span> <span class="token keyword">typeof</span> obj<span class="token punctuation">.</span>value<span class="token punctuation">.</span>bar <span class="token comment">// string</span>
</code></pre></div><p>\u82E5\u5176\u4E2D\u7684\u503C\u662F <code>ref</code> \u5462\uFF1F</p><div class="language-typescript ext-ts"><pre class="language-typescript"><code><span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  foo<span class="token operator">:</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  bar<span class="token operator">:</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">&#39;1&#39;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">OF</span></span> <span class="token operator">=</span> <span class="token keyword">typeof</span> obj<span class="token punctuation">.</span>value<span class="token punctuation">.</span>foo <span class="token comment">// Ref&lt;number&gt;</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">OB</span></span> <span class="token operator">=</span> <span class="token keyword">typeof</span> obj<span class="token punctuation">.</span>value<span class="token punctuation">.</span>bar <span class="token comment">// Ref&lt;string&gt;</span>
</code></pre></div><p>\u8FD9\u5C31\u4E0D\u7B26\u5408\u671F\u671B\u4E86\uFF0C\u9700\u8981\u4FEE\u6539 <code>UnwrapRef</code>\uFF1A</p><div class="language-typescript ext-ts"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name">UnwrapRef<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token class-name">Ref<span class="token operator">&lt;</span><span class="token keyword">infer</span> <span class="token constant">R</span><span class="token operator">&gt;</span></span>
  <span class="token operator">?</span> UnwrapRefSimple<span class="token operator">&lt;</span><span class="token constant">R</span><span class="token operator">&gt;</span>
  <span class="token operator">:</span> UnwrapRefSimple<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span>
                                  
<span class="token comment">// UnwrapRef \u4EC5\u4F5C infer\uFF0C\u5176\u4F59\u4EA4\u7ED9 UnwrapRefSimple</span>
<span class="token keyword">type</span> <span class="token class-name">UnwrapRefSimple<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token class-name">Ref</span>
  <span class="token operator">?</span> <span class="token constant">T</span>
  <span class="token operator">:</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token class-name">object</span>
    <span class="token operator">?</span> <span class="token punctuation">{</span>
      <span class="token punctuation">[</span><span class="token constant">K</span> <span class="token keyword">in</span> <span class="token keyword">keyof</span> <span class="token constant">T</span><span class="token punctuation">]</span><span class="token operator">:</span> UnwrapRef<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">[</span><span class="token constant">K</span><span class="token punctuation">]</span><span class="token operator">&gt;</span>
    <span class="token punctuation">}</span>
    <span class="token operator">:</span> <span class="token constant">T</span>
</code></pre></div><p>\u4FEE\u6539\u6D4B\u8BD5\u7528\u4F8B\uFF1A</p><div class="language-typescript ext-ts"><pre class="language-typescript"><code><span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  foo<span class="token operator">:</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">&#39;1&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  bar<span class="token operator">:</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    baz<span class="token operator">:</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  arr<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
    foo<span class="token operator">:</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    foo<span class="token operator">:</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">&#39;1&#39;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> c1 <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">C1</span></span> <span class="token operator">=</span> <span class="token keyword">typeof</span> c1<span class="token punctuation">.</span>value <span class="token comment">// number</span>
<span class="token keyword">const</span> count <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token function">ref</span><span class="token punctuation">(</span><span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">C</span></span> <span class="token operator">=</span> <span class="token keyword">typeof</span> count<span class="token punctuation">.</span>value <span class="token comment">// number</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">OF</span></span> <span class="token operator">=</span> <span class="token keyword">typeof</span> obj<span class="token punctuation">.</span>value<span class="token punctuation">.</span>foo <span class="token comment">// string</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">OB</span></span> <span class="token operator">=</span> <span class="token keyword">typeof</span> obj<span class="token punctuation">.</span>value<span class="token punctuation">.</span>bar<span class="token punctuation">.</span>baz <span class="token comment">// boolean</span>

<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">A</span></span> <span class="token operator">=</span> <span class="token keyword">typeof</span> obj<span class="token punctuation">.</span>value<span class="token punctuation">.</span>arr
obj<span class="token punctuation">.</span>value<span class="token punctuation">.</span>arr<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>a <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">type</span> <span class="token class-name"><span class="token constant">A</span></span> <span class="token operator">=</span> <span class="token keyword">typeof</span> a<span class="token punctuation">.</span>foo <span class="token comment">// string | boolean</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="\u5BF9\u6BD4\u7ED3\u679C" tabindex="-1"><a class="header-anchor" href="#\u5BF9\u6BD4\u7ED3\u679C" aria-hidden="true">#</a> \u5BF9\u6BD4\u7ED3\u679C</h2><div class="language-typescript ext-ts"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">Ref<span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token operator">=</span> <span class="token builtin">any</span><span class="token operator">&gt;</span></span> <span class="token punctuation">{</span>
  value<span class="token operator">:</span> <span class="token constant">T</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">UnwrapRef<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token class-name">Ref<span class="token operator">&lt;</span><span class="token keyword">infer</span> <span class="token constant">R</span><span class="token operator">&gt;</span></span>
  <span class="token operator">?</span> UnwrapRefSimple<span class="token operator">&lt;</span><span class="token constant">R</span><span class="token operator">&gt;</span>
  <span class="token operator">:</span> UnwrapRefSimple<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span>

<span class="token keyword">type</span> <span class="token class-name">UnwrapRefSimple<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token class-name">Ref</span>
  <span class="token operator">?</span> <span class="token constant">T</span>
  <span class="token operator">:</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token class-name">object</span>
    <span class="token operator">?</span> <span class="token punctuation">{</span>
      <span class="token punctuation">[</span><span class="token constant">K</span> <span class="token keyword">in</span> <span class="token keyword">keyof</span> <span class="token constant">T</span><span class="token punctuation">]</span><span class="token operator">:</span> UnwrapRef<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">[</span><span class="token constant">K</span><span class="token punctuation">]</span><span class="token operator">&gt;</span>
    <span class="token punctuation">}</span>
    <span class="token operator">:</span> <span class="token constant">T</span>
    
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token generic-function"><span class="token function">ref</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>value<span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">)</span><span class="token operator">:</span> Ref<span class="token operator">&lt;</span>UnwrapRef<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    value
  <span class="token punctuation">}</span> <span class="token keyword">as</span> <span class="token builtin">any</span>
<span class="token punctuation">}</span>
</code></pre></div><p>\u800C Vue \u6E90\u7801\u5219\u662F\uFF1A</p><div class="language-typescript ext-ts"><pre class="language-typescript"><code><span class="token keyword">export</span> <span class="token keyword">interface</span> <span class="token class-name">RefUnwrapBailTypes</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">type</span> <span class="token class-name">UnwrapRef<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token class-name">Ref<span class="token operator">&lt;</span><span class="token keyword">infer</span> <span class="token constant">V</span><span class="token operator">&gt;</span></span>
  <span class="token operator">?</span> UnwrapRefSimple<span class="token operator">&lt;</span><span class="token constant">V</span><span class="token operator">&gt;</span>
  <span class="token operator">:</span> UnwrapRefSimple<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span>

<span class="token keyword">export</span> <span class="token keyword">type</span> <span class="token class-name">UnwrapRefSimple<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">T</span> <span class="token keyword">extends</span>
  <span class="token operator">|</span> <span class="token builtin">Function</span>
  <span class="token operator">|</span> CollectionTypes
  <span class="token operator">|</span> BaseTypes
  <span class="token operator">|</span> Ref
  <span class="token operator">|</span> RefUnwrapBailTypes<span class="token punctuation">[</span><span class="token keyword">keyof</span> RefUnwrapBailTypes<span class="token punctuation">]</span>
  <span class="token operator">?</span> <span class="token constant">T</span>
  <span class="token operator">:</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token builtin">Array</span><span class="token operator">&lt;</span><span class="token builtin">any</span><span class="token operator">&gt;</span></span>
    <span class="token operator">?</span> <span class="token punctuation">{</span> <span class="token punctuation">[</span><span class="token constant">K</span> <span class="token keyword">in</span> <span class="token keyword">keyof</span> <span class="token constant">T</span><span class="token punctuation">]</span><span class="token operator">:</span> UnwrapRefSimple<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">[</span><span class="token constant">K</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> <span class="token punctuation">}</span>
    <span class="token operator">:</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token class-name">object</span>
      <span class="token operator">?</span> <span class="token punctuation">{</span>
        <span class="token punctuation">[</span><span class="token constant">P</span> <span class="token keyword">in</span> <span class="token keyword">keyof</span> <span class="token constant">T</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token constant">P</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token builtin">symbol</span></span> <span class="token operator">?</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token constant">P</span><span class="token punctuation">]</span> <span class="token operator">:</span> UnwrapRef<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">[</span><span class="token constant">P</span><span class="token punctuation">]</span><span class="token operator">&gt;</span>
      <span class="token punctuation">}</span>
      <span class="token operator">:</span> <span class="token constant">T</span>
</code></pre></div><p>\u6E90\u7801\u4E2D\u6BD4\u8F83\u6709\u610F\u601D\u7684\u662F\u6DFB\u52A0\u4E86 <code>RefUnwrapBailTypes</code>\uFF0C\u589E\u52A0\u4E86\u5916\u90E8\u6269\u5C55\u7684\u7A7A\u95F4\u3002</p>`,26);function g(b,T){const p=t("OutboundLink");return l(),o(c,null,[u,n("p",null,[n("a",i,[d,e(p)]),f,y,m]),w],64)}var h=k(r,[["render",g]]);export{h as default};
