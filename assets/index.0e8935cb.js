var n;function e(e,i){void 0===i&&(i={});var a=i.registrationOptions;void 0===a&&(a={}),delete i.registrationOptions;var c=function(n){for(var e=[],t=arguments.length-1;t-- >0;)e[t]=arguments[t+1];i&&i[n]&&i[n].apply(i,e)};"serviceWorker"in navigator&&n.then((function(){Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/))?(!function(n,e,i){fetch(n).then((function(t){404===t.status?(e("error",new Error("Service worker not found at "+n)),o()):-1===t.headers.get("content-type").indexOf("javascript")?(e("error",new Error("Expected "+n+" to have javascript content-type, but received "+t.headers.get("content-type"))),o()):r(n,e,i)})).catch((function(n){return t(e,n)}))}(e,c,a),navigator.serviceWorker.ready.then((function(n){c("ready",n)})).catch((function(n){return t(c,n)}))):(r(e,c,a),navigator.serviceWorker.ready.then((function(n){c("ready",n)})).catch((function(n){return t(c,n)})))}))}function t(n,e){navigator.onLine||n("offline"),n("error",e)}function r(n,e,r){navigator.serviceWorker.register(n,r).then((function(n){e("registered",n),n.waiting?e("updated",n):n.onupdatefound=function(){e("updatefound",n);var t=n.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?e("updated",n):e("cached",n))}}})).catch((function(n){return t(e,n)}))}function o(){"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(n){n.unregister()})).catch((function(n){return t(emit,n)}))}"undefined"!=typeof window&&(n="undefined"!=typeof Promise?new Promise((function(n){return window.addEventListener("load",n)})):{then:function(n){return window.addEventListener("load",n)}});export{e as register,o as unregister};
