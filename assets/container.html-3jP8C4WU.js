import{_ as s,c as n,a as e,o as t}from"./app-CQrWi6O2.js";const l={};function p(c,a){return t(),n("div",null,[...a[0]||(a[0]=[e(`<h1 id="了解-docker-容器" tabindex="-1"><a class="header-anchor" href="#了解-docker-容器"><span>了解 Docker 容器</span></a></h1><h2 id="概念" tabindex="-1"><a class="header-anchor" href="#概念"><span>概念</span></a></h2><p>简单来说，容器是镜像的一个运行实例。所不同的是，镜像是静态的只读文件，而容器带有运行时需要的可写文件层，同时，容器中的应用进程处于运行状态。</p><h2 id="状态" tabindex="-1"><a class="header-anchor" href="#状态"><span>状态</span></a></h2><h3 id="_1-运行中的容器" tabindex="-1"><a class="header-anchor" href="#_1-运行中的容器"><span>1. 运行中的容器</span></a></h3><div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token function">docker</span> <span class="token function">ps</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># -a 所有的</span></span>
<span class="line"><span class="token comment"># -f 可以按需求进行过滤</span></span>
<span class="line"><span class="token comment"># 过滤参数 status：One of created, restarting, running, removing, paused, exited, or dead</span></span>
<span class="line"></span></code></pre></div><h3 id="_2-容器日志" tabindex="-1"><a class="header-anchor" href="#_2-容器日志"><span>2. 容器日志</span></a></h3><div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token comment"># docker logs [OPTIONS] CONTAINER</span></span>
<span class="line"><span class="token function">docker</span> logs ttubuntu</span>
<span class="line"></span>
<span class="line"><span class="token comment"># -f 跟踪实时日志</span></span>
<span class="line"><span class="token comment"># -n 指定输出多少行日志</span></span>
<span class="line"><span class="token function">docker</span> logs <span class="token parameter variable">-f</span> <span class="token parameter variable">--tail</span> <span class="token number">20</span> ttubuntu</span>
<span class="line"></span></code></pre></div><h3 id="_3-容器信息" tabindex="-1"><a class="header-anchor" href="#_3-容器信息"><span>3. 容器信息</span></a></h3><div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token comment"># 具体信息</span></span>
<span class="line"><span class="token function">docker</span> insepect ttubuntu</span>
<span class="line"></span>
<span class="line"><span class="token comment"># 内部进程</span></span>
<span class="line"><span class="token function">docker</span> <span class="token function">top</span> ttubuntu</span>
<span class="line"></span>
<span class="line"><span class="token comment"># 统计信息</span></span>
<span class="line"><span class="token function">docker</span> stats ttubuntu</span>
<span class="line"></span></code></pre></div><h3 id="_4-容器变更" tabindex="-1"><a class="header-anchor" href="#_4-容器变更"><span>4. 容器变更</span></a></h3><div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token function">docker</span> <span class="token function">diff</span> ttubuntu</span>
<span class="line"></span></code></pre></div><h3 id="_5-端口映射" tabindex="-1"><a class="header-anchor" href="#_5-端口映射"><span>5. 端口映射</span></a></h3><div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token function">docker</span> port ttubuntu</span>
<span class="line"></span></code></pre></div><h2 id="操作" tabindex="-1"><a class="header-anchor" href="#操作"><span>操作</span></a></h2><h3 id="_1-创建容器" tabindex="-1"><a class="header-anchor" href="#_1-创建容器"><span>1. 创建容器</span></a></h3><div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token function">docker</span> create <span class="token parameter variable">-it</span> <span class="token parameter variable">--name</span> ttubuntu ubuntu <span class="token comment"># 默认新创建的容器为停止状态</span></span>
<span class="line"></span></code></pre></div><ul><li><code>-i</code> 让容器的标准输入保持打开</li><li><code>-t</code> 让 Docker 分配一个伪终端并绑定到容器上</li></ul><h3 id="_2-启动容器" tabindex="-1"><a class="header-anchor" href="#_2-启动容器"><span>2. 启动容器</span></a></h3><div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token comment"># docker start [OPTIONS] CONTAINER [CONTAINER...]</span></span>
<span class="line"><span class="token function">docker</span> start ttubuntu</span>
<span class="line"></span></code></pre></div><h3 id="_3-执行容器" tabindex="-1"><a class="header-anchor" href="#_3-执行容器"><span>3. 执行容器</span></a></h3><div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token function">docker</span> run ubuntu <span class="token builtin class-name">echo</span> <span class="token string">&quot;hello world&quot;</span></span>
<span class="line"></span></code></pre></div><p>等价于先执行 <code>docker create</code> 再执行 <code>docker start</code>，在输出 <code>hello world</code> 后容器自动停止。</p><div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token comment"># 守护态 -d</span></span>
<span class="line"><span class="token function">docker</span> run <span class="token parameter variable">-d</span> ubuntu /bin/sh <span class="token parameter variable">-c</span> <span class="token string">&quot;while true; do echo hello world; sleep 1;done&quot;</span></span>
<span class="line"></span></code></pre></div><h3 id="_4-暂停-恢复容器" tabindex="-1"><a class="header-anchor" href="#_4-暂停-恢复容器"><span>4. 暂停/恢复容器</span></a></h3><div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token function">docker</span> pause ttubuntu</span>
<span class="line"><span class="token comment"># docker unpause ttubuntu</span></span>
<span class="line"><span class="token function">docker</span> <span class="token function">ps</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># 可见 paused 状态</span></span>
<span class="line">CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS                   PORTS               NAMES</span>
<span class="line">228fe9793889        ubuntu              <span class="token string">&quot;/bin/bash&quot;</span>         <span class="token number">14</span> minutes ago      Up <span class="token number">14</span> minutes <span class="token punctuation">(</span>Paused<span class="token punctuation">)</span>                       ttubuntu</span>
<span class="line"></span></code></pre></div><h3 id="_5-终止" tabindex="-1"><a class="header-anchor" href="#_5-终止"><span>5. 终止</span></a></h3><div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token function">docker</span> stop ttubuntu</span>
<span class="line"></span>
<span class="line"><span class="token comment"># 验证</span></span>
<span class="line"><span class="token function">docker</span> <span class="token function">ps</span> <span class="token comment"># ttubuntu 已消失</span></span>
<span class="line"></span></code></pre></div><h3 id="_6-启动-重启容器" tabindex="-1"><a class="header-anchor" href="#_6-启动-重启容器"><span>6. 启动/重启容器</span></a></h3><p><code>restart</code> 命令会将一个运行态的容器先终止，然后再重新启动。</p><div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token function">docker</span> start ttubuntu</span>
<span class="line"><span class="token comment"># docker restart ttubuntu</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># 验证</span></span>
<span class="line"><span class="token function">docker</span> <span class="token function">ps</span> <span class="token comment"># ttubuntu 可见</span></span>
<span class="line"></span></code></pre></div><h3 id="_7-清除停止状态的容器" tabindex="-1"><a class="header-anchor" href="#_7-清除停止状态的容器"><span>7. 清除停止状态的容器</span></a></h3><div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token function">docker</span> container prune</span>
<span class="line"></span>
<span class="line"><span class="token comment"># 验证</span></span>
<span class="line"><span class="token function">docker</span> start ttubuntu</span>
<span class="line"><span class="token comment"># Error response from daemon: No such container: ttubuntu</span></span>
<span class="line"></span></code></pre></div><h3 id="_8-删除容器" tabindex="-1"><a class="header-anchor" href="#_8-删除容器"><span>8. 删除容器</span></a></h3><div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token comment"># docker rm [OPTIONS] CONTAINER [CONTAINER...]</span></span>
<span class="line"><span class="token comment"># -v 可以删除容器挂载的数据卷</span></span>
<span class="line"><span class="token function">docker</span> <span class="token function">rm</span> ttubuntu</span>
<span class="line"></span></code></pre></div><h3 id="_9-更新容器配置" tabindex="-1"><a class="header-anchor" href="#_9-更新容器配置"><span>9. 更新容器配置</span></a></h3><div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token function">docker</span> update ttubuntu</span>
<span class="line"></span></code></pre></div><h2 id="进入容器" tabindex="-1"><a class="header-anchor" href="#进入容器"><span>进入容器</span></a></h2><p>在使用 <code>-d</code> 参数启动容器后，容器会进入后台，无法看到容器的输出信息，可以利用 <code>docker attach</code> 或 <code>docker exec</code> 进入容器。</p><p><code>attach</code> 不会在容器中创建进程执行额外的命令，只是附着到容器上；<code>exec</code> 会在运行的容器上创建进程执行新的命令。</p><div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token function">docker</span> <span class="token builtin class-name">exec</span> <span class="token parameter variable">-it</span> ttubuntu <span class="token function">sh</span></span>
<span class="line"></span></code></pre></div><h2 id="分享" tabindex="-1"><a class="header-anchor" href="#分享"><span>分享</span></a></h2><h3 id="_1-导出容器" tabindex="-1"><a class="header-anchor" href="#_1-导出容器"><span>1. 导出容器</span></a></h3><p>不管容器是否处于运行状态，都可以导出。</p><div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token comment"># docker export [OPTIONS] CONTAINER</span></span>
<span class="line"><span class="token function">docker</span> <span class="token builtin class-name">export</span> <span class="token parameter variable">-o</span> ubuntu-latest.tar ttubuntu</span>
<span class="line"></span></code></pre></div><h3 id="_2-导入容器" tabindex="-1"><a class="header-anchor" href="#_2-导入容器"><span>2. 导入容器</span></a></h3><div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token comment"># docker import [OPTIONS] file|URL|- [REPOSITORY[:TAG]]</span></span>
<span class="line"><span class="token function">docker</span> <span class="token function">import</span> http://example.com/exampleimage.tgz</span>
<span class="line"><span class="token function">docker</span> <span class="token function">import</span> ubuntu-latest.tar</span>
<span class="line"></span></code></pre></div><h3 id="_3-复制文件" tabindex="-1"><a class="header-anchor" href="#_3-复制文件"><span>3. 复制文件</span></a></h3><p>主机和容器间复制文件。</p><div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token function">docker</span> <span class="token function">cp</span> data ttubuntu:/tmp/</span>
<span class="line"></span></code></pre></div>`,50)])])}const o=s(l,[["render",p]]),d=JSON.parse('{"path":"/backend/docker/container.html","title":"了解 Docker 容器","lang":"zh-CN","frontmatter":{"description":"了解 Docker 容器","autoPrev":"image","sidebarDepth":2},"headers":[{"level":2,"title":"概念","slug":"概念","link":"#概念","children":[]},{"level":2,"title":"状态","slug":"状态","link":"#状态","children":[{"level":3,"title":"1. 运行中的容器","slug":"_1-运行中的容器","link":"#_1-运行中的容器","children":[]},{"level":3,"title":"2. 容器日志","slug":"_2-容器日志","link":"#_2-容器日志","children":[]},{"level":3,"title":"3. 容器信息","slug":"_3-容器信息","link":"#_3-容器信息","children":[]},{"level":3,"title":"4. 容器变更","slug":"_4-容器变更","link":"#_4-容器变更","children":[]},{"level":3,"title":"5. 端口映射","slug":"_5-端口映射","link":"#_5-端口映射","children":[]}]},{"level":2,"title":"操作","slug":"操作","link":"#操作","children":[{"level":3,"title":"1. 创建容器","slug":"_1-创建容器","link":"#_1-创建容器","children":[]},{"level":3,"title":"2. 启动容器","slug":"_2-启动容器","link":"#_2-启动容器","children":[]},{"level":3,"title":"3. 执行容器","slug":"_3-执行容器","link":"#_3-执行容器","children":[]},{"level":3,"title":"4. 暂停/恢复容器","slug":"_4-暂停-恢复容器","link":"#_4-暂停-恢复容器","children":[]},{"level":3,"title":"5. 终止","slug":"_5-终止","link":"#_5-终止","children":[]},{"level":3,"title":"6. 启动/重启容器","slug":"_6-启动-重启容器","link":"#_6-启动-重启容器","children":[]},{"level":3,"title":"7. 清除停止状态的容器","slug":"_7-清除停止状态的容器","link":"#_7-清除停止状态的容器","children":[]},{"level":3,"title":"8. 删除容器","slug":"_8-删除容器","link":"#_8-删除容器","children":[]},{"level":3,"title":"9. 更新容器配置","slug":"_9-更新容器配置","link":"#_9-更新容器配置","children":[]}]},{"level":2,"title":"进入容器","slug":"进入容器","link":"#进入容器","children":[]},{"level":2,"title":"分享","slug":"分享","link":"#分享","children":[{"level":3,"title":"1. 导出容器","slug":"_1-导出容器","link":"#_1-导出容器","children":[]},{"level":3,"title":"2. 导入容器","slug":"_2-导入容器","link":"#_2-导入容器","children":[]},{"level":3,"title":"3. 复制文件","slug":"_3-复制文件","link":"#_3-复制文件","children":[]}]}],"git":{"updatedTime":1636472222000,"contributors":[{"name":"shanyuhai123","username":"shanyuhai123","email":"864299347@qq.com","commits":6,"url":"https://github.com/shanyuhai123"}]},"filePathRelative":"backend/docker/container.md"}');export{o as comp,d as data};
